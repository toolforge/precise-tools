{% extends "layout.html" %}
{% block body %}
<h1>Tools running jobs on the grid engine in last 7 days</h1>

<p>
  The Toolforge administration team is working on eventually removing
  support for the <a href="https://wikitech.wikimedia.org/wiki/Help:Toolforge/Grid">
  Grid engine</a> in favor of the more modern <a href="https://wikitech.wikimedia.org/wiki/Help:Toolforge/Kubernetes">
  Kubernetes</a> platform.
</p>

<p>
  This page was used to track tools running an older version of the grid engine.
  The Stretch grid engine cluster has now been shut down, and tools that weren't
  migrated by their maintainers were either migrated by the Toolforge admins or
  entirely shut down if they didn't seem to run properly on Buster.
</p>

<p>Total tools still running on the grid engine: <var>{{ tools|count }}</var></p>
<p>Last updated: <var>{{ generated }}</var></p>

<table id="precise">
  <thead>
    <tr>
      <th>Tool</th>
      <th>Job</th>
      <th>Total seen</th>
      <th>Last seen (exit)</th>
    </tr>
  </thead>
  <tbody>
    {% for tool_name, tool_data in tools|dictsort %}
    <tr>
      <td rowspan="{{ tool_data.jobs|count }}" id="{{ tool_name }}" class="tool-name">
        <a href="{{ url_for('tool', name=tool_name) }}">{{ tool_name }}</a>
        <div class='members'>
          members:
          <ul>
            {% for member in tool_data.members|sort %}
            <li><a href="{{ url_for('user', user=member) }}">{{ member }}</a></li>
            {% endfor %}
          </ul>
        </div>
      </td>
      {% for job, data in tool_data.jobs|dictsort %}
        {% if not loop.first %}<tr>{% endif %}
        <td class="job-name">{{ job }}</td>
        <td class="seen">{{ data.count }}</td>
        <td class="last">{{ data.last }}</td>
        {% if not loop.last %}</tr>{% endif %}
      {% endfor %}
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
